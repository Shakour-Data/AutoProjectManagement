<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoProjectManagement Dashboard</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.7.2/dist/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>AutoProjectManagement Dashboard</h1>
                <span class="project-id" id="projectId">Project: Loading...</span>
            </div>
            <div class="header-right">
                <div class="health-score" id="healthScore">
                    <span class="score-label">Health:</span>
                    <span class="score-value">--</span>
                </div>
                <div class="layout-controls">
                    <button id="editLayoutBtn" class="btn btn-secondary">Edit Layout</button>
                    <select id="layoutSelector">
                        <option value="standard">Standard Layout</option>
                        <option value="minimal">Minimal Layout</option>
                        <option value="custom">Custom Layout</option>
                    </select>
                    <button id="saveLayoutBtn" class="btn btn-success" style="display: none;">Save Layout</button>
                    <button id="cancelLayoutBtn" class="btn btn-danger" style="display: none;">Cancel</button>
                </div>
                <div class="refresh-controls">
                    <button id="refreshBtn" class="btn btn-primary">Refresh</button>
                    <select id="refreshRate">
                        <option value="3000">3s</option>
                        <option value="5000">5s</option>
                        <option value="10000">10s</option>
                        <option value="30000">30s</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Overview Section -->
            <section class="overview-section">
                <div class="overview-card">
                    <h3>Project Overview</h3>
                    <div class="overview-stats">
                        <div class="stat">
                            <span class="stat-label">Total Tasks</span>
                            <span class="stat-value" id="totalTasks">--</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Completed</span>
                            <span class="stat-value" id="completedTasks">--</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Progress</span>
                            <span class="stat-value" id="progressPercentage">--%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Risk Level</span>
                            <span class="stat-value risk-level" id="riskLevel">--</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Widgets Grid -->
            <section class="widgets-grid">
                <!-- Project Health Widget -->
                <div class="widget health-widget">
                    <h3>Project Health</h3>
                    <div class="widget-content">
                        <canvas id="healthChart"></canvas>
                    </div>
                </div>

                <!-- Task Progress Widget -->
                <div class="widget progress-widget">
                    <h3>Task Progress</h3>
                    <div class="widget-content">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>

                <!-- Risk Assessment Widget -->
                <div class="widget risk-widget">
                    <h3>Risk Assessment</h3>
                    <div class="widget-content">
                        <div class="risk-matrix" id="riskMatrix">
                            <!-- Risk indicators will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Team Performance Widget -->
                <div class="widget team-widget">
                    <h3>Team Performance</h3>
                    <div class="widget-content">
                        <canvas id="teamChart"></canvas>
                    </div>
                </div>

                <!-- Quality Metrics Widget -->
                <div class="widget quality-widget">
                    <h3>Quality Metrics</h3>
                    <div class="widget-content">
                        <canvas id="qualityChart"></canvas>
                    </div>
                </div>

                <!-- Alerts Widget -->
                <div class="widget alerts-widget">
                    <h3>Active Alerts</h3>
                    <div class="widget-content">
                        <div class="alerts-list" id="alertsList">
                            <!-- Alerts will be populated here -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-info">
                <span>Last Updated: <span id="lastUpdated">--</span></span>
                <span>Connected: <span id="connectionStatus">Disconnected</span></span>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Loading Dashboard...</p>
    </div>

    <!-- Widget Configuration Modal -->
    <div class="modal-overlay" id="widgetConfigModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Widget Configuration</h3>
                <button class="modal-close" id="closeConfigModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="widget-config-form">
                    <div class="form-group">
                        <label for="widgetEnabled">Enabled:</label>
                        <input type="checkbox" id="widgetEnabled" checked>
                    </div>
                    <div class="form-group">
                        <label for="widgetRefreshRate">Refresh Rate (ms):</label>
</html>
